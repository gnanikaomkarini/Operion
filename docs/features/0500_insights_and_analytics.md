# 600: Analytics Engine

## Query Logic

Analytics are generated by SQL queries against the local `activity.db`.

## Core Metrics

### Focus Score
Calculated as: `(Time in Whitelisted Apps) / (Total Active Time)`

### Deep Work Blocks
identified by:
-   Contiguous time > 20 mins.
-   In `Work` mode.
-   No context switches to blacklisted apps.

## Aggregation Pipeline

1.  **Raw Data:** `SELECT * FROM activity_log WHERE timestamp > ?`
2.  **Sessionization:** Group consecutive events with gap < 5 mins into "Sessions".
3.  **Classification:** Tag sessions based on Mode rules.
4.  **Summarization:** Emit JSON report for UI/Notifications.